<html>
	<script src="deps/require.js"></script>
	<script src="../dist/ink.amd.js"></script>
	<script>
		require(['jsink'], function(jsink) {
			fetch('stories/choice.ink.json')
			.then(response => {
				return response.text();
			})
			.then(data => {
				initStory(jsink.Story, data)
			});
		});
		
		function initStory(StoryClass, jsonText){
			var s = new StoryClass(jsonText);
			
			while (s.canContinue){
				console.log(s.Continue());
			}

			if (s.currentChoices.length > 0){
				for (var i = 0; i < s.currentChoices.length; ++i) {
					var choice = s.currentChoices[i];
			//		console.log(choice);
			//		console.log(choice.text);
					console.log((i + 1) + ". " + choice.text);
				}
			}
		}
	</script>
</html>